<!doctype html><html lang=fr>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>Comment créer un site multilingue avec Hugo | Blog de Stéphane</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="Hugo permet de créer un site avec plusieurs langues.
Configuration Il faut tout d&rsquo;abord indiquer dans le fichier de configuration la liste des langues qui seront supportées :
config.yaml
languages: en: title: Stéphane's Blog fr: title: Blog de Stéphane Il est possible d&rsquo;ajouter un bloc params pour chaque langue afin de surcharger des valeurs spécifiques en fonction de la langue, par exemple des libellés ou des urls différents.
À noter que la valeur de la langue par défaut sera celle définie dans defaultContentLanguage.">
<meta name=generator content="Hugo 0.88.1">
<meta name=ROBOTS content="INDEX, FOLLOW">
<link rel=stylesheet href=/ananke/css/main.min.8ca51ad9680f6f5bb4adc9140a88775d0b6638471cd8aa5fc091c9e308bdacdd.css>
<meta property="og:title" content="Comment créer un site multilingue avec Hugo">
<meta property="og:description" content="Hugo permet de créer un site avec plusieurs langues.
Configuration Il faut tout d&rsquo;abord indiquer dans le fichier de configuration la liste des langues qui seront supportées :
config.yaml
languages: en: title: Stéphane's Blog fr: title: Blog de Stéphane Il est possible d&rsquo;ajouter un bloc params pour chaque langue afin de surcharger des valeurs spécifiques en fonction de la langue, par exemple des libellés ou des urls différents.
À noter que la valeur de la langue par défaut sera celle définie dans defaultContentLanguage.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.deraco.fr/fr/post/2021-06-12-creer-un-site-multilingue-avec-hugo/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2021-06-12T00:00:00+00:00">
<meta property="article:modified_time" content="2021-06-12T00:00:00+00:00"><meta property="og:site_name" content="Blog de Stéphane">
<meta itemprop=name content="Comment créer un site multilingue avec Hugo">
<meta itemprop=description content="Hugo permet de créer un site avec plusieurs langues.
Configuration Il faut tout d&rsquo;abord indiquer dans le fichier de configuration la liste des langues qui seront supportées :
config.yaml
languages: en: title: Stéphane's Blog fr: title: Blog de Stéphane Il est possible d&rsquo;ajouter un bloc params pour chaque langue afin de surcharger des valeurs spécifiques en fonction de la langue, par exemple des libellés ou des urls différents.
À noter que la valeur de la langue par défaut sera celle définie dans defaultContentLanguage."><meta itemprop=datePublished content="2021-06-12T00:00:00+00:00">
<meta itemprop=dateModified content="2021-06-12T00:00:00+00:00">
<meta itemprop=wordCount content="768">
<meta itemprop=keywords content="Hugo,Multilingue,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Comment créer un site multilingue avec Hugo">
<meta name=twitter:description content="Hugo permet de créer un site avec plusieurs langues.
Configuration Il faut tout d&rsquo;abord indiquer dans le fichier de configuration la liste des langues qui seront supportées :
config.yaml
languages: en: title: Stéphane's Blog fr: title: Blog de Stéphane Il est possible d&rsquo;ajouter un bloc params pour chaque langue afin de surcharger des valeurs spécifiques en fonction de la langue, par exemple des libellés ou des urls différents.
À noter que la valeur de la langue par défaut sera celle définie dans defaultContentLanguage.">
</head>
<body class="ma0 avenir bg-near-white production">
<header>
<div class=bg-dark-gray>
<nav class="pv3 ph3 ph4-ns" role=navigation>
<div class="flex-l justify-between items-center center">
<a href=/fr/ class="f3 fw2 hover-white no-underline white-90 dib">
Blog de Stéphane
</a>
<div class="flex-l items-center">
<h4></h4>
<ul class="pl0 mr3">
<li class="list f5 f4-ns fw4 dib pr3">
<a class="hover-white no-underline white-90" href=/en/post/2021-06-12-create-a-multilingual-site-with-hugo/>en</a>
</li>
</ul>
<ul class="pl0 mr3">
<li class="list f5 f4-ns fw4 dib pr3">
<a class="hover-white no-underline white-90" href=/fr/tags title=Tags>
Tags
</a>
</li>
<li class="list f5 f4-ns fw4 dib pr3">
<a class="hover-white no-underline white-90" href=/fr/about/ title="À propos page">
À propos
</a>
</li>
</ul>
<a href=https://twitter.com/stephane_deraco target=_blank class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
<a href=https://www.linkedin.com/in/st%C3%A9phane-deraco-964640194/ target=_blank class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window"><svg height="32" style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
<a href=https://github.com/stephane-deraco target=_blank class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel=noopener aria-label="follow on Github——Opens in a new window"><svg height="32" style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
<a href=https://blog.deraco.fr/fr/index.xml target=_blank class="link-transition rss link dib z-999 pt3 pt0-l mr1" title="RSS link" rel=noopener aria-label="RSS——Opens in a new window"><svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path id="scale" d="M4 4.44v2.83c7.03.0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9.0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
</div>
</div>
</nav>
</div>
</header>
<main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3">
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
POSTS
</aside>
<div id=sharing class=mt3>
<a href="https://www.facebook.com/sharer.php?u=https://blog.deraco.fr/fr/post/2021-06-12-creer-un-site-multilingue-avec-hugo/" class="facebook no-underline" aria-label="share on Facebook"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765 50.32h6.744V33.998h4.499l.596-5.624h-5.095l.007-2.816c0-1.466.14-2.253 2.244-2.253h2.812V17.68h-4.5c-5.405.0-7.307 2.729-7.307 7.317v3.377h-3.369v5.625h3.369V50.32zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</a>
<a href="https://twitter.com/share?url=https://blog.deraco.fr/fr/post/2021-06-12-creer-un-site-multilingue-avec-hugo/&text=Comment%20cr%c3%a9er%20un%20site%20multilingue%20avec%20Hugo" class="twitter no-underline" aria-label="share on Twitter"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://blog.deraco.fr/fr/post/2021-06-12-creer-un-site-multilingue-avec-hugo/&title=Comment%20cr%c3%a9er%20un%20site%20multilingue%20avec%20Hugo" class="linkedin no-underline" aria-label="share on LinkedIn"><svg height="32" style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</a>
</div>
<h1 class="f1 athelas mt3 mb1">Comment créer un site multilingue avec Hugo</h1>
<time class="f6 mv4 dib tracked" datetime=2021-06-12T00:00:00Z>2021-06-12</time>
<span class="f6 mv4 dib tracked"> - 4 minutes de lecture </span>
<span class="f6 mv4 dib tracked"> - 768 mots</span>
</header>
<div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>Hugo permet de créer un <a href=https://gohugo.io/content-management/multilingual/>site avec plusieurs langues</a>.</p>
<h2 id=configuration>Configuration</h2>
<p>Il faut tout d&rsquo;abord indiquer dans le fichier de configuration la liste des langues qui seront supportées :</p>
<p><em>config.yaml</em></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>languages</span>:
  <span style=color:#f92672>en</span>:
    <span style=color:#f92672>title</span>: <span style=color:#ae81ff>Stéphane&#39;s Blog</span>
  <span style=color:#f92672>fr</span>:
    <span style=color:#f92672>title</span>: <span style=color:#ae81ff>Blog de Stéphane</span>
</code></pre></div><p>Il est possible d&rsquo;ajouter un bloc <code>params</code> pour chaque langue afin de surcharger des valeurs spécifiques en fonction de la langue, par exemple des libellés ou des urls différents.</p>
<p>À noter que la valeur de la langue par défaut sera celle définie dans <code>defaultContentLanguage</code>.</p>
<p>Pour la langue par défaut, l&rsquo;adresse de base est simplement <code>/</code>, alors que pour les autres langues, l&rsquo;adresse est <code>/</code> suivie du code de la langue, par exemple <code>/en</code>.</p>
<p>Ce comportement peut être modifié pour avoir toujours <code>/xx</code>, y compris pour la langue par défaut, avec ce paramètre : <code>defaultContentLanguageInSubdir: true</code>.</p>
<h2 id=emplacement-de-la-traduction>Emplacement de la traduction</h2>
<p>Hugo reconnait les différentes traductions par deux mécanismes possibles :</p>
<ul>
<li>code de la langue dans le nom de fichier, par exemple <code>great-post.en.md</code> et <code>great-post.fr.md</code></li>
<li>répertoire spécifique pour chaque langue.</li>
</ul>
<p>Je trouve qu&rsquo;avoir un répertoire pour chaque langue est plus agréable, cela évite d&rsquo;avoir des fichiers en plusieurs exemplaires (un par langue) dans le même répertoire.</p>
<p>Pour avoir un répertoire par langue, il faut le préciser dans le fichier <code>config.yml</code> au niveau de la configuration de chaque langue, avec la clé <code>contentDir</code>, par exemple :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>languages</span>:
  <span style=color:#f92672>en</span>:
    <span style=color:#f92672>title</span>: <span style=color:#ae81ff>Stéphane&#39;s Blog</span>
    <span style=color:#f92672>contentDir</span>: <span style=color:#ae81ff>./content/en/</span>
  <span style=color:#f92672>fr</span>:
    <span style=color:#f92672>title</span>: <span style=color:#ae81ff>Blog de Stéphane</span>
    <span style=color:#f92672>contentDir</span>: <span style=color:#ae81ff>./content/fr/</span>
</code></pre></div><blockquote>
<p><strong>Attention</strong> : Les fichiers doivent se trouver dans le répertoire <code>content/en/post</code> ou <code>content/fr/post</code> dans l&rsquo;exemple ici.
Si les fichiers sont simplement dans <code>content/en</code>, alors ils ne seront pas générés.</p>
</blockquote>
<h2 id=traduction-des-urls>Traduction des URLs</h2>
<p>Avec ce mécanisme, cela fonctionne bien, mais comme Hugo se base sur le nom des fichiers pour faire le lien, et que ce nom se retrouve dans l&rsquo;URL, alors par défaut les URLs ne sont pas traduites.</p>
<p>Par exemple, si on a les fichiers <code>content/en/post/who-am-i.md</code> et <code>content/fr/post/qui-suis-je.md</code>, Hugo ne saura pas que c&rsquo;est le même contenu mais traduit.</p>
<p>Pour cela, il suffit d&rsquo;ajouter dans l&rsquo;en-tête de ces fichiers la clé <code>translationKey</code> qui doit donc être commune et identique aux différentes traductions, par exemple <code>translationKey: "who-am-i"</code> dans les deux pages <code>en</code> et <code>fr</code> :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>---
<span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;Qui suis-je ?&#34;</span>
<span style=color:#f92672>date</span>: <span style=color:#e6db74>2021-06-04T23:01:59</span><span style=color:#ae81ff>+02</span>:<span style=color:#ae81ff>00</span>
<span style=color:#f92672>draft</span>: <span style=color:#66d9ef>true</span>
<span style=color:#f92672>translationKey</span>: <span style=color:#ae81ff>who-am-i</span>
---
</code></pre></div><h2 id=attribut-html-lang>Attribut HTML <code>lang</code></h2>
<p>Le W3C indique que la balise <code>&lt;html></code> <a href=https://www.w3.org/International/questions/qa-html-language-declarations>doit contenir un attribut <code>lang</code></a> avec le code de la langue sur 2 caractères.</p>
<p>Il faut donc supprimer du fichier de configuration la langue par défaut (<code>languageCode: fr-fr</code>) et indiquer dans le bloc <code>languages</code>, pour chaque langue, le code à 2 lettres de la langue :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>languages</span>:
  <span style=color:#f92672>en</span>:
    <span style=color:#f92672>title</span>: <span style=color:#ae81ff>Stéphane&#39;s Blog</span>
    <span style=color:#f92672>contentDir</span>: <span style=color:#ae81ff>./content/en/</span>
    <span style=color:#f92672>languageCode</span>: <span style=color:#ae81ff>en</span>
  <span style=color:#f92672>fr</span>:
    <span style=color:#f92672>title</span>: <span style=color:#ae81ff>Blog de Stéphane</span>
    <span style=color:#f92672>contentDir</span>: <span style=color:#ae81ff>./content/fr/</span>
    <span style=color:#f92672>languageCode</span>: <span style=color:#ae81ff>fr</span>
</code></pre></div><p>Ainsi, l&rsquo;attribut <code>lang</code> sera automatiquement à la bonne valeur, par exemple :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span>&gt;
</code></pre></div><h2 id=redirection-automatique-sur-la-bonne-langue>Redirection automatique sur la bonne langue</h2>
<p>Par défaut, quand on accède au site sans préciser la langue dans l&rsquo;URL, on est automatiquement redirigé vers la langue par défaut (définie dans le fichier de configuration par la clé <code>defaultContentLanguage</code>).</p>
<p>Or les navigateurs envoient une liste de langues dans l&rsquo;ordre de préférence de l&rsquo;utilisateur.
L&rsquo;idée est d&rsquo;utiliser la configuration du navigateur pour automatiquement basculer le site sur la version anglaise ou la version française.</p>
<p>Ce site explique très bien la marche à suivre : <a href=https://nanmu.me/en/posts/2020/hugo-i18n-automatic-language-redirection/>https://nanmu.me/en/posts/2020/hugo-i18n-automatic-language-redirection/</a>.
Il suffit d&rsquo;ajouter un fichier <code>layouts/alias.html</code> dans lequel du code Javascript va extraire la langue préférée du navigateur et rediriger si besoin sur la bonne version du site :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
&lt;<span style=color:#f92672>html</span>&gt;
&lt;<span style=color:#f92672>head</span>&gt;
    &lt;<span style=color:#f92672>title</span>&gt;{{ .Permalink }}&lt;/<span style=color:#f92672>title</span>&gt;
    &lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;canonical&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Permalink }}&#34;</span>/&gt;
    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;robots&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;noindex&#34;</span>&gt;
    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span>/&gt;
    &lt;<span style=color:#f92672>noscript</span>&gt;
        &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>http-equiv</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;refresh&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0; url={{ .Permalink }}&#34;</span>/&gt;
    &lt;/<span style=color:#f92672>noscript</span>&gt;
    &lt;<span style=color:#f92672>script</span>&gt;
      ;(<span style=color:#66d9ef>function</span> () {
        <span style=color:#75715e>// Only do i18n at root, 
</span><span style=color:#75715e></span>        <span style=color:#75715e>// otherwise, redirect immediately
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (window.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>pathname</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;/&#39;</span>) {
          window.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>replace</span>(<span style=color:#e6db74>&#39;{{ .Permalink }}&#39;</span>)
          <span style=color:#66d9ef>return</span>
        }

        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>getFirstBrowserLanguage</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {
          <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>nav</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>navigator</span>,
          <span style=color:#a6e22e>browserLanguagePropertyKeys</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;language&#39;</span>, <span style=color:#e6db74>&#39;browserLanguage&#39;</span>, <span style=color:#e6db74>&#39;systemLanguage&#39;</span>, <span style=color:#e6db74>&#39;userLanguage&#39;</span>],
          <span style=color:#a6e22e>i</span>,
          <span style=color:#a6e22e>language</span>

          <span style=color:#66d9ef>if</span> (Array.<span style=color:#a6e22e>isArray</span>(<span style=color:#a6e22e>nav</span>.<span style=color:#a6e22e>languages</span>)) {
            <span style=color:#66d9ef>for</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>nav</span>.<span style=color:#a6e22e>languages</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
              <span style=color:#a6e22e>language</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>nav</span>.<span style=color:#a6e22e>languages</span>[<span style=color:#a6e22e>i</span>]
              <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>language</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>language</span>.<span style=color:#a6e22e>length</span>) {
                <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>language</span>
              }
            }
          }

          <span style=color:#75715e>// support for other well known properties in browsers
</span><span style=color:#75715e></span>          <span style=color:#66d9ef>for</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>browserLanguagePropertyKeys</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
            <span style=color:#a6e22e>language</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>nav</span>[<span style=color:#a6e22e>browserLanguagePropertyKeys</span>[<span style=color:#a6e22e>i</span>]]
            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>language</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>language</span>.<span style=color:#a6e22e>length</span>) {
              <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>language</span>
            }
          }
          <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;en&#39;</span>
        }

        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>preferLang</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getFirstBrowserLanguage</span>()
        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>preferLang</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#e6db74>&#39;fr&#39;</span>) <span style=color:#f92672>!==</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) {
          <span style=color:#75715e>// browser in french
</span><span style=color:#75715e></span>          window.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>replace</span>(<span style=color:#e6db74>&#39;/fr/&#39;</span>)
        } <span style=color:#66d9ef>else</span> {
          <span style=color:#75715e>// fallback to English
</span><span style=color:#75715e></span>          window.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>replace</span>(<span style=color:#e6db74>&#39;/en/&#39;</span>)
        }
      })()
    &lt;/<span style=color:#f92672>script</span>&gt;
&lt;/<span style=color:#f92672>head</span>&gt;
&lt;<span style=color:#f92672>body</span>&gt;
&lt;<span style=color:#f92672>h1</span>&gt;Rerouting&lt;/<span style=color:#f92672>h1</span>&gt;
&lt;<span style=color:#f92672>p</span>&gt;You should be rerouted in a jiff, if not, &lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Permalink }}&#34;</span>&gt;click here&lt;/<span style=color:#f92672>a</span>&gt;.&lt;/<span style=color:#f92672>p</span>&gt;
&lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;
</code></pre></div><p>Merci à <a href=https://twitter.com/nanmu42>nanmu42</a> pour cette astuce !</p>
<h2 id=conclusion>Conclusion</h2>
<p>Il est assez simple de gérer plusieurs langues avec Hugo.
Finalement, le plus compliqué sera de traduire :)</p>
<ul class=pa0>
<li class=list>
<a href=/fr/tags/hugo class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Hugo</a>
</li>
<li class=list>
<a href=/fr/tags/multilingue class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Multilingue</a>
</li>
</ul>
<div class="mt6 instapaper_ignoref">
</div>
</div>
<aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
<p class="f5 b mb3">Table des matières</p>
<nav id=TableOfContents>
<ul>
<li><a href=#configuration>Configuration</a></li>
<li><a href=#emplacement-de-la-traduction>Emplacement de la traduction</a></li>
<li><a href=#traduction-des-urls>Traduction des URLs</a></li>
<li><a href=#attribut-html-lang>Attribut HTML <code>lang</code></a></li>
<li><a href=#redirection-automatique-sur-la-bonne-langue>Redirection automatique sur la bonne langue</a></li>
<li><a href=#conclusion>Conclusion</a></li>
</ul>
</nav>
</div>
<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
<p class="f5 b mb3">Lié</p>
<ul class="pa0 list">
<li class=mb2>
<a href=/fr/post/2021-04-11-creation-blog-avec-hugo/>Création d'un blog avec Hugo</a>
</li>
</ul>
</div>
</aside>
</article>
</main>
<footer class="bg-dark-gray bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://blog.deraco.fr/>
&copy; Blog de Stéphane
2021
</a>
<div>
<a class="f8 fw4 hover-white no-underline white-40 dn dib-ns pv2 ph3" rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>Contenu sous licence : <img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png></a>
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=/fr/credits>Crédits</a>
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=/fr/terms>Mentions légales</a>
</div>
<div>
<a href=https://twitter.com/stephane_deraco target=_blank class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
<a href=https://www.linkedin.com/in/st%C3%A9phane-deraco-964640194/ target=_blank class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window"><svg height="32" style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
<a href=https://github.com/stephane-deraco target=_blank class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel=noopener aria-label="follow on Github——Opens in a new window"><svg height="32" style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
<a href=https://blog.deraco.fr/fr/index.xml target=_blank class="link-transition rss link dib z-999 pt3 pt0-l mr1" title="RSS link" rel=noopener aria-label="RSS——Opens in a new window"><svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path id="scale" d="M4 4.44v2.83c7.03.0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9.0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
</div>
</div>
</footer>
</body>
</html>